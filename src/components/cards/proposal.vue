<template>
  <div
    class="box p-3 rounded-3 proposal-card overflow-y-auto"
    style="
      box-shadow: 5px 10px 18px #888888;
      margin-bottom: 20px;
      height: 350px;
    "
  >
    <div class="d-flex">
      <div class="col-md-4 text-start">
        <router-link
          class="router-link"
          :to="getRouteLocale('service-provider-proposal-page', { id: id })"
        >
          <img class="img-fluid" v-if="image" :src="image" />
          <div
            v-else
            class="d-flex rounded-3"
            style="width: 100%; height: 100; background: #cafffd80 50%"
          >
            <svg
              class="m-auto"
              width="113"
              height="113"
              viewBox="0 0 113 113"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M58.2794 0C59.4134 0.317788 60.58 0.547301 61.6696 0.97396C63.4431 1.66839 64.4882 2.90717 64.3491 4.95219C64.2928 5.78785 64.4083 6.64412 64.5208 7.47978C64.8287 9.74255 66.0515 11.0873 68.3195 11.4845C71.1589 11.9818 74.0279 12.2937 76.8614 12.8174C79.9584 13.3883 82.9873 14.2181 85.7142 15.8717C89.8623 18.3817 90.786 22.0068 88.1805 26.0851C85.4862 30.3075 82.783 34.5182 80.817 39.1438C78.5432 44.4962 77.0864 50.0162 77.8444 55.8747C78.1346 58.1139 78.6142 60.3914 79.4344 62.4865C80.6601 65.6232 82.2649 68.6127 83.7068 71.6641C83.8252 71.6552 83.9436 71.6464 84.0621 71.6376C86.7712 65.2818 89.4803 58.9231 92.2339 52.4644C90.8808 51.6846 89.5307 50.9461 88.222 50.1428C84.8112 48.0448 83.4847 43.6487 85.1517 40.0942C85.7349 38.8495 86.4899 38.4494 87.4729 38.8554C88.5092 39.285 88.7401 40.1354 88.1776 41.4389C87.2213 43.6517 87.9052 46.0056 89.963 47.3298C91.0792 48.0477 92.2605 48.6627 93.5692 49.416C94.792 46.2528 96.8409 43.993 100.341 43.4898C102.351 43.2015 104.252 43.5928 105.936 44.7669C107.994 46.1999 109.119 48.1772 109.38 50.6695C109.643 53.1853 108.551 55.2391 107.227 57.1017C108.249 58.0669 109.321 58.876 110.138 59.8883C112.693 63.0661 112.823 67.2062 110.535 70.7931C106.834 76.5986 103.091 82.3776 99.3812 88.1773C97.5811 90.9903 97.9956 94.1564 100.382 96.2573C101.486 97.2283 102.801 97.6255 104.237 97.7462C109.472 98.1758 113.099 102.192 112.998 107.424C112.974 108.675 113.01 109.925 112.971 111.176C112.936 112.276 112.344 112.85 111.337 112.847C110.336 112.844 109.747 112.273 109.706 111.167C109.652 109.734 109.726 108.295 109.617 106.868C109.362 103.543 107.245 101.312 103.911 101.048C97.8239 100.562 94.8127 95.5276 94.94 91.3581C94.9963 89.5484 95.6062 87.9242 96.5892 86.4029C100.305 80.6504 104.003 74.889 107.695 69.1188C109.836 65.7762 108.918 62.1834 105.332 60.1354C105.134 60.4091 104.918 60.6886 104.725 60.9829C99.781 68.4391 94.8423 75.9012 89.8801 83.3486C89.4803 83.9489 89.3856 84.4697 89.5662 85.1818C90.5225 88.9805 90.8838 92.8587 90.9015 96.7663C90.9163 99.6794 89.0096 101.601 86.0547 101.642C83.6505 101.677 81.2434 101.692 78.8392 101.627C77.9421 101.604 77.4447 101.925 76.971 102.651C74.9813 105.706 72.9324 108.722 70.8984 111.746C70.1434 112.871 69.3232 113.15 68.4083 112.626C67.5231 112.12 67.3691 111.393 67.8991 110.125C68.9176 107.683 69.945 105.244 70.9665 102.804C71.1056 102.472 71.227 102.133 71.3899 101.71C68.1863 101.71 65.0893 101.71 61.8265 101.71C61.8265 102.104 61.8265 102.492 61.8265 102.881C61.8265 105.529 61.8324 108.177 61.8235 110.826C61.8176 112.15 61.2314 112.812 60.127 112.791C59.0641 112.77 58.5133 112.135 58.5104 110.861C58.4985 107.851 58.5074 104.841 58.5074 101.739C57.1691 101.739 55.9019 101.739 54.5015 101.739C54.5015 103.134 54.5015 104.523 54.5015 105.909C54.5015 107.489 54.5044 109.072 54.5015 110.652C54.4955 112.111 53.9833 112.776 52.8641 112.791C51.7302 112.806 51.1854 112.138 51.1824 110.699C51.1765 108.089 51.1795 105.476 51.1795 102.866C51.1795 102.507 51.1795 102.148 51.1795 101.657C48.87 101.657 46.6642 101.651 44.4555 101.666C44.2956 101.666 44.1031 101.771 43.9847 101.886C43.0906 102.781 42.3089 103.819 41.3111 104.573C36.1001 108.504 30.4361 111.514 23.9046 112.665C23.3687 112.759 22.8387 112.885 22.3058 113C20.7513 113 19.1969 113 17.6425 113C16.772 112.853 15.8986 112.72 15.0311 112.553C10.1398 111.605 5.83483 109.596 2.61053 105.679C0.988008 103.708 0.126416 101.474 0.17971 98.879C0.241887 95.7924 0.209318 92.7028 0.191554 89.6161C0.164906 84.7669 0.283338 79.9059 0.0405529 75.0656C-0.456861 65.2406 3.62312 58.0198 12.1976 53.2853C17.5922 50.3076 23.5226 49.1158 29.6012 48.5538C31.3451 48.392 33.0979 48.3273 34.901 48.2155C34.2555 44.2049 33.089 40.4414 31.2089 36.9781C29.0919 33.0735 26.741 29.2924 24.3872 25.5201C22.1222 21.892 22.6877 18.6906 26.2347 16.2778C28.8462 14.5005 31.8306 13.6237 34.8891 13.0528C38.1549 12.4437 41.4592 12.0465 44.7368 11.4992C46.8952 11.1373 48.0676 9.9544 48.4378 7.81228C48.5947 6.91188 48.7131 5.97323 48.645 5.06989C48.4762 2.86009 49.6369 1.61248 51.5377 0.900398C52.571 0.506106 53.6636 0.291305 54.7265 0C55.9108 0 57.0951 0 58.2794 0ZM43.9818 98.3053C44.4377 98.3317 44.7634 98.37 45.0861 98.37C54.0041 98.3729 62.9249 98.3641 71.8429 98.3906C72.5919 98.3935 72.9354 98.1611 73.2226 97.4696C76.1331 90.4812 79.0939 83.5134 81.9895 76.5191C82.176 76.0689 82.1079 75.3657 81.88 74.9155C80.7756 72.7145 79.5854 70.5547 78.4129 68.3861C73.8029 59.853 73.1486 51.0108 76.2426 41.845C78.2115 36.0101 81.2256 30.7224 84.5713 25.5937C85.0924 24.7963 85.6135 23.9812 86.0044 23.1161C86.5995 21.8038 86.407 20.5002 85.2257 19.641C84.0473 18.7848 82.7593 18.005 81.4062 17.4783C77.5542 15.9806 73.4743 15.4304 69.3913 15.0125C64.4083 14.5035 61.9716 12.3319 61.2343 7.56217C61.1011 6.6912 61.033 5.80257 61.0419 4.92571C61.0508 4.21951 60.7665 3.88996 60.0944 3.88113C57.7317 3.85759 55.369 3.83699 53.0063 3.83993C52.2453 3.83993 51.896 4.22246 51.9522 5.0287C51.9937 5.64662 51.8871 6.27631 51.8397 6.90011C51.4785 11.6552 49.2283 14.1121 44.5117 14.8654C43.0521 15.0979 41.5746 15.2273 40.1149 15.451C36.3843 16.0247 32.6567 16.6338 29.2281 18.314C25.9801 19.9088 25.5982 21.4271 27.6441 24.3814C30.4983 28.5067 33.0949 32.7792 35.0875 37.3901C37.616 43.2456 39.055 49.3012 38.5309 55.7276C38.1105 60.8505 36.2452 65.4907 33.8321 69.9633C32.1563 73.0706 30.4687 76.1719 28.9231 79.3439C28.1 81.0329 27.5671 82.8631 26.9009 84.6316C26.9957 84.711 27.0904 84.7905 27.1851 84.8728C28.5234 84.2049 29.8913 83.5899 31.1941 82.8572C34.7914 80.8328 37.9773 78.2729 40.9055 75.3863C41.7996 74.5065 42.7708 74.3653 43.4133 75.1656C43.7834 75.6276 43.9581 76.3632 43.961 76.9782C43.9995 83.6341 43.9847 90.2929 43.9847 96.9488C43.9818 97.3784 43.9818 97.808 43.9818 98.3053ZM18.9749 53.9062C17.7047 54.4182 16.5618 54.8154 15.4841 55.348C15.1584 55.5069 14.8475 56.0218 14.8238 56.3955C14.7409 57.602 14.8031 58.8201 14.7883 60.0324C14.7735 61.2624 14.1695 61.9333 13.1273 61.9156C12.1265 61.9009 11.5314 61.2536 11.49 60.0884C11.4633 59.3292 11.484 58.57 11.484 57.499C10.507 58.314 9.76973 58.9584 9.00289 59.5616C8.19163 60.2031 7.87482 60.9652 7.90147 62.0333C7.97845 65.0464 7.94292 68.0625 7.91924 71.0756C7.91035 72.3967 7.0458 73.1059 5.8526 72.8204C4.88442 72.588 4.62387 71.8583 4.62387 70.9755C4.62387 70.2399 4.62387 69.5043 4.62091 68.7687C4.62091 68.0742 4.62091 67.3798 4.62091 66.6854C4.27449 66.9443 4.16494 67.2062 4.08204 67.4769C3.15827 70.49 3.11978 73.559 3.55206 76.6457C3.88367 79.0114 5.38183 80.6298 7.16127 82.1775C9.03842 79.3263 11.564 77.3901 14.436 75.863C18.5633 73.6649 23.0104 72.5203 27.6263 71.9201C28.1948 71.8465 29.009 71.6758 29.237 71.2815C31.5819 67.2327 33.7315 63.072 34.673 58.4494C35.123 56.2455 35.2296 53.9709 35.5139 51.5463C33.3377 51.6434 31.5198 51.7229 29.6396 51.8053C29.6396 53.2059 29.6485 54.4152 29.6367 55.6246C29.6248 56.8487 29.0208 57.5402 27.9934 57.5461C26.9631 57.549 26.3472 56.8605 26.3265 55.6305C26.3088 54.5359 26.3236 53.4413 26.3236 52.2231C24.8965 52.5026 23.6115 52.7557 22.288 53.0146C22.288 53.5296 22.288 53.9297 22.288 54.3299C22.288 57.2341 22.2821 60.1384 22.2909 63.0426C22.2939 63.8783 22.0985 64.5845 21.2103 64.8846C19.9726 65.3054 18.9808 64.5433 18.9749 63.1338C18.963 60.1295 18.9749 57.1253 18.9749 53.9062ZM3.49876 83.4928C3.49876 83.9842 3.49876 84.3373 3.49876 84.6904C3.49876 89.2483 3.57575 93.8062 3.46916 98.3612C3.40994 100.874 4.27449 102.937 6.08354 104.54C7.41886 105.726 8.89038 106.865 10.4951 107.627C16.473 110.461 22.5663 110.261 28.6833 107.962C29.4294 107.683 29.6722 107.333 29.6663 106.547C29.6308 100.521 29.6485 94.4918 29.6456 88.4656C29.6456 88.1478 29.616 87.83 29.5982 87.4475C28.3813 87.8712 27.2532 88.3244 26.0897 88.6451C25.4797 88.8128 25.3583 89.113 25.3702 89.6573C25.3968 90.7578 25.4057 91.8642 25.3643 92.9647C25.3228 94.0828 24.6389 94.7154 23.6233 94.6742C22.6433 94.633 22.0896 94.0269 22.0689 92.9117C22.0482 91.82 22.063 90.7254 22.063 89.6073C20.624 89.6073 19.3124 89.6073 17.8853 89.6073C17.8853 90.0663 17.8853 90.4606 17.8853 90.8549C17.8853 93.5384 17.8823 96.222 17.8823 98.9026C17.8823 99.8765 17.3494 100.43 16.4226 100.53C15.564 100.621 14.8919 100.259 14.661 99.3704C14.5692 99.0232 14.5751 98.6436 14.5751 98.2788C14.5692 95.4864 14.587 92.691 14.5514 89.8986C14.5485 89.5779 14.3323 89.0629 14.0925 88.9805C12.9496 88.5833 11.7653 88.3067 10.4418 87.9448C10.4418 88.8923 10.4744 89.7632 10.433 90.6342C10.3797 91.773 9.72828 92.385 8.69793 92.3409C7.72086 92.2997 7.17608 91.7023 7.15239 90.5783C7.1287 89.366 7.16127 88.1537 7.13166 86.9414C7.12278 86.6383 7.05468 86.2264 6.85039 86.0616C5.80819 85.2054 4.71861 84.4138 3.49876 83.4928ZM104.284 55.6452C104.814 54.7124 105.433 53.8709 105.803 52.9352C107.014 49.8809 104.631 46.5912 101.338 46.7324C99.2895 46.8178 97.8801 47.8565 97.0807 49.7338C90.6824 64.7845 84.2812 79.8324 77.8859 94.8861C77.8533 94.9655 77.8918 95.0774 77.9095 95.3628C86.1524 82.9749 94.3005 70.7284 102.487 58.4288C101.626 57.9374 100.927 57.5431 100.201 57.1282C99.9852 57.4872 99.8224 57.7697 99.6448 58.0463C99.0467 58.982 98.2769 59.2174 97.3916 58.7348C96.5093 58.2552 96.2428 57.4342 96.7432 56.4868C97.6225 54.8301 98.5256 53.1853 99.4582 51.5581C99.9764 50.6518 100.871 50.4194 101.72 50.8813C102.567 51.3433 102.795 52.176 102.336 53.147C102.17 53.4972 101.993 53.8444 101.803 54.2299C102.641 54.7095 103.402 55.142 104.284 55.6452ZM32.9646 105.803C33.0623 105.879 33.1571 105.953 33.2548 106.029C35.4399 104.546 37.619 103.051 39.8189 101.589C40.4702 101.157 40.6982 100.636 40.6953 99.853C40.6627 93.7209 40.6775 87.5888 40.6745 81.4566C40.6745 81.1094 40.639 80.7593 40.6212 80.4474C38.1431 82.1481 35.7152 83.793 33.3199 85.4878C33.0919 85.6497 32.9854 86.1058 32.9794 86.4294C32.9469 88.1537 32.9646 89.8809 32.9646 91.6052C32.9646 96.3367 32.9646 101.071 32.9646 105.803ZM9.83191 83.9636C14.0895 86.0116 18.3146 86.7001 22.7469 86.0292C22.9956 85.991 23.2887 85.582 23.3835 85.2907C23.7329 84.2108 23.9372 83.0809 24.328 82.0157C25.1363 79.8236 26.0304 77.6608 26.9601 75.301C20.4138 76.5397 14.2672 78.2699 9.83191 83.9636ZM87.0288 88.2979C86.8896 88.2861 86.7505 88.2714 86.6113 88.2596C84.4055 91.564 82.1997 94.8684 79.8696 98.3582C82.1672 98.3582 84.1924 98.3876 86.2116 98.3435C87.0673 98.3259 87.618 97.8109 87.5706 96.9252C87.4167 94.0504 87.2124 91.1756 87.0288 88.2979Z"
                fill="#1FB9B3"
              />
            </svg>
          </div>
        </router-link>
      </div>
      <div class="col-md-8">
        <router-link
          class="router-link"
          :to="getRouteLocale('service-provider-proposal-page', { id: id })"
        >
          <div style="border-bottom: 1px solid #e8eff0" class="my-1 pb-3">
            <div class="row justify-content-between">
              <div class="t-c">
                <div
                  class="d-flex justify-content-between mb-3"
                  style="align-items: baseline !important"
                >
                  <h5>{{ title ?? "N/A" }}</h5>
                  <span
                    class="rounded-3 text-white"
                    style="padding: 4px 12px"
                    :class="[state == 'offline' ? 'bg-off' : 'bg-on']"
                  >
                    {{ state == "offline" ? "حضورية" : "عن بعد" }}
                  </span>
                </div>
                <p>
                  <span class="m-c">{{ department ?? "N/A" }}</span>
                  -
                  <span style="color: #ffbc00">{{ category ?? "N/A" }}</span>
                </p>
              </div>
            </div>
            <p
              class="box-description text-two-lines t-c fs-r-16-24"
              v-html="description"
            ></p>
            <div class="d-flex gap-2">
              <!-- style="flex-wrap: wrap;" -->
              <p class="t-c fs-r-12 mb-0">
                <!--timer-->
                <TimerIcon />
                <template
                  >{{ $t("ends-yet") }} {{ executionTime }}
                  {{ $t("day_s") }}</template
                >
                <!--<template v-else>{{ $t('timeover') }}</template>-->
              </p>
              <p class="t-c fs-r-12 mb-0">
                <emptyWalletIcon :size="24" color="#979797" />
                {{ price ?? "N/A" }} {{ $t("riyals") }}
              </p>
              <p class="t-c fs-r-12 mb-0">
                <thunderIcon :size="24" color="#979797" />

                {{ offers ?? "N/A" }} {{ $t("offers") }}
              </p>
              <p class="t-c fs-r-12 mb-0">
                <MapIcon :size="24" color="#979797" />
                {{ place ?? "N/A" }}
              </p>
            </div>
          </div>
        </router-link>
        <div class="d-flex gap-2 mt-3" style="align-items: flex-start">
          <img
            v-if="user_info"
            style="border-radius: 100%"
            :src="user_info.image"
            width="35px"
            height="35px"
          />

          <!-- <img :src="`${publicPath}assets/img/Ellipse 603 (1).svg`" style="" /> -->
          <div v-if="user_info">
            <span class="t-c">{{ user_info.name }}</span>

            <div class="t-c opacity-50 fs-r-12 mb-0">
              <img :src="`${publicPath}assets/img/wi_time-8.svg`" style="" />

              {{ datePublish ? timeAgoToHuman(datePublish) : "N/A" }}
            </div>
          </div>

          <div v-if="images">
            <div class="d-flex gap-3 flex-wrap flex-shrink-0">
              <a
                v-for="(item, i) in images"
                :key="i"
                style="text-decoration: revert"
                class="t-c"
                href
                >Image {{ i + 1 }}
              </a>
            </div>
          </div>
          <img
            v-b-modal="`my-modal-${id}`"
            style="margin-right: auto"
            :src="`${publicPath}assets/img/Vector789.svg`"
          />
        </div>
      </div>
    </div>
    <!-- The modal -->
    <b-modal :id="`my-modal-${id}`" :hide-header="true" :hide-footer="true">
      <h5 style="color: #ebae05" class="py-3">
        شارك {{ title ?? "N/A" }} على مواقع التواصل الاجتماعي
      </h5>
      <img
        style="display: flex; margin: auto"
        :src="`${publicPath}assets/img/Group 1171276011.png`"
      />
      <div
        class="d-flex justify-content-center gap-4 p-4 p-4 icon-social-exibition mt-4"
      >
        <button style="background: transparent; border: 0">
          <ShareNetwork
            network="twitter"
            :url="shareLink"
            title="Share in twitter"
            description="This is another awesome article for awesome readers"
          >
            <img
              class="h-100"
              :src="`${publicPath}assets/img/Twitter.png`"
              alt=""
            />
          </ShareNetwork>
        </button>

        <button style="background: transparent; border: 0">
          <ShareNetwork
            network="Linkedin"
            :url="shareLink"
            title="Share in Linkedin"
            description="This is another awesome article for awesome readers"
          >
            <img
              class="h-100"
              :src="`${publicPath}assets/img/Linkedin.png`"
              alt=""
            />
          </ShareNetwork>
        </button>
        <button style="background: transparent; border: 0">
          <ShareNetwork
            network="Facebook"
            :url="shareLink"
            title="Share in facebook"
            description="This is another awesome article for awesome readers"
          >
            <img
              class="h-100"
              :src="`${publicPath}assets/img/Facebook.png`"
              alt=""
            />
          </ShareNetwork>
        </button>
        <div
          class="fb-share-button"
          :data-href="currentUrl"
          data-layout="button_count"
        ></div>
      </div>
    </b-modal>
  </div>
</template>

<script>
import emptyWalletIcon from "@/components/icon-svg/empty-wallet.vue";
import thunderIcon from "@/components/icon-svg/thunder.vue";
import MapIcon from "@/components/icon-svg/localisation.vue";
import TimerIcon from "@/components/icon-svg/timer.vue";

export default {
  name: "show-service",
  components: {
    emptyWalletIcon,
    thunderIcon,
    MapIcon,
    TimerIcon,
  },
  props: {
    title: {
      type: String,
    },
    description: {
      type: String,
    },
    executionTime: {
      type: Number,
    },
    department: {
      type: String,
    },
    category: {
      type: String,
    },
    place: {
      type: String,
    },
    datePublish: {
      type: String,
    },
    image: {
      type: String,
    },
    state: {
      type: String,
    },
    id: {
      type: [String, Number],
    },
    offers: {
      type: [String, Number],
    },
    resetDays: {
      type: [Number],
    },
    user_info: {
      type: Object,
    },
    images: {
      type: Array,
    },
    shareLink: {
      type: String,
    },
    price: {
      type: [String, Number],
    },
  },
  data: () => {
    return {};
  },
  mounted() {
    // this.shareLink = window.location.href + "/" + this.id;
  },
};
</script>

<style>
.box-description {
  max-height: 48px;
  height: 48px;
  overflow: hidden;
}

.bg-off {
  background: #cf1f3e;
}

.bg-on {
  background: #2cb7b3;
}

.modal-backdrop {
  --bs-backdrop-zindex: none !important;
  --bs-backdrop-bg: none !important;
}

#my-modal___BV_modal_header_,
#my-modal___BV_modal_footer_ {
  visibility: hidden !important;
}
</style>
