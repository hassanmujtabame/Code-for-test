<template>
    <div id="list-item-3">
        <div class="box border mt-5 ">
            <h3 class="border-bottom py-2 t-c px-3">
                معلومات الدراسة
            </h3>
            <ValidationObserver ref="form">
                <div class=" p-3">
                    <div class="row align-items-start ">
                        <label class="col-md-3 m-c fs-5 fw-bolder">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M22 22.75H2C1.59 22.75 1.25 22.41 1.25 22C1.25 21.59 1.59 21.25 2 21.25H22C22.41 21.25 22.75 21.59 22.75 22C22.75 22.41 22.41 22.75 22 22.75Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M21 22.75H3C2.59 22.75 2.25 22.41 2.25 22V6C2.25 2.98 3.98 1.25 7 1.25H17C20.02 1.25 21.75 2.98 21.75 6V22C21.75 22.41 21.41 22.75 21 22.75ZM3.75 21.25H20.25V6C20.25 3.78 19.22 2.75 17 2.75H7C4.78 2.75 3.75 3.78 3.75 6V21.25Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M10 17.25H7C6.59 17.25 6.25 16.91 6.25 16.5C6.25 16.09 6.59 15.75 7 15.75H10C10.41 15.75 10.75 16.09 10.75 16.5C10.75 16.91 10.41 17.25 10 17.25Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M17 17.25H14C13.59 17.25 13.25 16.91 13.25 16.5C13.25 16.09 13.59 15.75 14 15.75H17C17.41 15.75 17.75 16.09 17.75 16.5C17.75 16.91 17.41 17.25 17 17.25Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M10 12.75H7C6.59 12.75 6.25 12.41 6.25 12C6.25 11.59 6.59 11.25 7 11.25H10C10.41 11.25 10.75 11.59 10.75 12C10.75 12.41 10.41 12.75 10 12.75Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M17 12.75H14C13.59 12.75 13.25 12.41 13.25 12C13.25 11.59 13.59 11.25 14 11.25H17C17.41 11.25 17.75 11.59 17.75 12C17.75 12.41 17.41 12.75 17 12.75Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M10 8.25H7C6.59 8.25 6.25 7.91 6.25 7.5C6.25 7.09 6.59 6.75 7 6.75H10C10.41 6.75 10.75 7.09 10.75 7.5C10.75 7.91 10.41 8.25 10 8.25Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M17 8.25H14C13.59 8.25 13.25 7.91 13.25 7.5C13.25 7.09 13.59 6.75 14 6.75H17C17.41 6.75 17.75 7.09 17.75 7.5C17.75 7.91 17.41 8.25 17 8.25Z"
                                    fill="#1FB9B3" />
                            </svg>


                            {{ $t('college') }} :

                        </label>
                        <div class="col-md-9 row mb-3 ">

                            <ValidationProvider tag="div" :name="$t('college')" vid="user_data.college" rules="required"
                                v-slot="{ errors }">
                                <input type="text" v-model="itemForm.college" class="form-control"
                                    placeholder=" أكتب اسم كليتك">
                                <d-error-input :errors="errors" v-if="errors.length" />
                            </ValidationProvider>

                        </div>


                    </div>
                    <div class="row align-items-start ">
                        <label class="col-md-3 m-c fs-5 fw-bolder">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12.1499 19.35C11.7399 19.35 11.3999 19.01 11.3999 18.6V16.5C11.3999 16.09 11.7399 15.75 12.1499 15.75C12.5599 15.75 12.8999 16.09 12.8999 16.5V18.6C12.8999 19.01 12.5599 19.35 12.1499 19.35Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M17.8999 22.75H6.3999V21C6.3999 19.48 7.6299 18.25 9.1499 18.25H15.1499C16.6699 18.25 17.8999 19.48 17.8999 21V22.75ZM7.8999 21.25H16.3999V21C16.3999 20.31 15.8399 19.75 15.1499 19.75H9.1499C8.4599 19.75 7.8999 20.31 7.8999 21V21.25Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M18.1499 22.75H6.1499C5.7399 22.75 5.3999 22.41 5.3999 22C5.3999 21.59 5.7399 21.25 6.1499 21.25H18.1499C18.5599 21.25 18.8999 21.59 18.8999 22C18.8999 22.41 18.5599 22.75 18.1499 22.75Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M18.4302 12.4401C18.2202 12.4401 18.0102 12.3501 17.8602 12.1801C17.6702 11.9601 17.6202 11.6501 17.7402 11.3901C18.0802 10.6101 18.2502 9.78006 18.2502 8.91006V5.91006C18.2502 5.56006 18.1902 5.22006 18.0702 4.86006C18.0602 4.83006 18.0502 4.79006 18.0402 4.75006C18.0102 4.60006 18.0002 4.45006 18.0002 4.31006C18.0002 3.90006 18.3402 3.56006 18.7502 3.56006H19.3502C21.1402 3.56006 22.6002 5.06006 22.6002 6.91006C22.6002 8.44006 21.9702 9.95006 20.8802 11.0401C20.8602 11.0601 20.8002 11.1101 20.7902 11.1201C20.2002 11.6101 19.5302 12.1601 18.6302 12.4101C18.5602 12.4301 18.5002 12.4401 18.4302 12.4401ZM19.6802 5.09006C19.7302 5.36006 19.7502 5.64006 19.7502 5.91006V8.91006C19.7502 9.32006 19.7202 9.71006 19.6602 10.1101C19.7202 10.0601 19.7702 10.0201 19.8302 9.97006C20.6302 9.17006 21.1002 8.05006 21.1002 6.91006C21.1002 6.01006 20.4902 5.25006 19.6802 5.09006Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M5.5799 12.4001C5.4999 12.4001 5.4299 12.3901 5.3499 12.3601C4.5299 12.1001 3.7599 11.6201 3.1199 10.9801C1.9699 9.7101 1.3999 8.3201 1.3999 6.8501C1.3999 5.0301 2.8299 3.6001 4.6499 3.6001H5.2999C5.5499 3.6001 5.7899 3.7301 5.9299 3.9401C6.0699 4.1501 6.0899 4.4201 5.9899 4.6501C5.8299 5.0101 5.7499 5.4201 5.7499 5.8501V8.8501C5.7499 9.7101 5.9199 10.5501 6.2699 11.3501C6.3899 11.6201 6.3299 11.9301 6.1399 12.1501C5.9899 12.3101 5.7899 12.4001 5.5799 12.4001ZM4.2999 5.1301C3.4899 5.2901 2.8999 5.9901 2.8999 6.8501C2.8999 7.9401 3.3399 8.9901 4.2099 9.9501C4.2499 10.0001 4.2999 10.0401 4.3499 10.0801C4.2799 9.6701 4.2499 9.2601 4.2499 8.8501V5.8501C4.2499 5.6101 4.2699 5.3701 4.2999 5.1301Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M12 16.75C7.73 16.75 4.25 13.27 4.25 9V6C4.25 3.38 6.38 1.25 9 1.25H15C17.62 1.25 19.75 3.38 19.75 6V9C19.75 13.27 16.27 16.75 12 16.75ZM9 2.75C7.21 2.75 5.75 4.21 5.75 6V9C5.75 12.45 8.55 15.25 12 15.25C15.45 15.25 18.25 12.45 18.25 9V6C18.25 4.21 16.79 2.75 15 2.75H9Z"
                                    fill="#1FB9B3" />
                            </svg>



                            {{ $t('specialization') }} :

                        </label>
                        <div class="col-md-9 row mb-3 ">

                            <ValidationProvider tag="div" :name="$t('specialization')" vid="user_data.specialization"
                                rules="required" v-slot="{ errors }">
                                <input type="text" v-model="itemForm.specialization" class="form-control"
                                    placeholder="حدد تخصصك في الكلية">
                                <d-error-input :errors="errors" v-if="errors.length" />
                            </ValidationProvider>
                        </div>


                    </div>
                    <div class="row  align-items-start">
                        <label class="col-md-3 m-c fs-5 fw-bolder">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M16.0002 22.7498H8.00023C3.38023 22.7498 2.52023 20.5998 2.30023 18.5098L1.55023 10.4998C1.44023 9.44977 1.41023 7.89977 2.45023 6.73977C3.35023 5.73977 4.84023 5.25977 7.00023 5.25977H17.0002C19.1702 5.25977 20.6602 5.74977 21.5502 6.73977C22.5902 7.89977 22.5602 9.44977 22.4502 10.5098L21.7002 18.4998C21.4802 20.5998 20.6202 22.7498 16.0002 22.7498ZM7.00023 6.74977C5.31023 6.74977 4.15023 7.07977 3.56023 7.73977C3.07023 8.27977 2.91023 9.10977 3.04023 10.3498L3.79023 18.3598C3.96023 19.9398 4.39023 21.2498 8.00023 21.2498H16.0002C19.6002 21.2498 20.0402 19.9398 20.2102 18.3498L20.9602 10.3598C21.0902 9.10977 20.9302 8.27977 20.4402 7.73977C19.8502 7.07977 18.6902 6.74977 17.0002 6.74977H7.00023Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M16 6.75C15.59 6.75 15.25 6.41 15.25 6V5.2C15.25 3.42 15.25 2.75 12.8 2.75H11.2C8.75 2.75 8.75 3.42 8.75 5.2V6C8.75 6.41 8.41 6.75 8 6.75C7.59 6.75 7.25 6.41 7.25 6V5.2C7.25 3.44 7.25 1.25 11.2 1.25H12.8C16.75 1.25 16.75 3.44 16.75 5.2V6C16.75 6.41 16.41 6.75 16 6.75Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M12 16.75C9.25 16.75 9.25 15.05 9.25 14.03V13C9.25 11.59 9.59 11.25 11 11.25H13C14.41 11.25 14.75 11.59 14.75 13V14C14.75 15.04 14.75 16.75 12 16.75ZM10.75 12.75C10.75 12.83 10.75 12.92 10.75 13V14.03C10.75 15.06 10.75 15.25 12 15.25C13.25 15.25 13.25 15.09 13.25 14.02V13C13.25 12.92 13.25 12.83 13.25 12.75C13.17 12.75 13.08 12.75 13 12.75H11C10.92 12.75 10.83 12.75 10.75 12.75Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M14 14.7702C13.63 14.7702 13.3 14.4902 13.26 14.1102C13.21 13.7002 13.5 13.3202 13.91 13.2702C16.55 12.9402 19.08 11.9402 21.21 10.3902C21.54 10.1402 22.01 10.2202 22.26 10.5602C22.5 10.8902 22.43 11.3602 22.09 11.6102C19.75 13.3102 16.99 14.4002 14.09 14.7702C14.06 14.7702 14.03 14.7702 14 14.7702Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M10.0002 14.7799C9.97023 14.7799 9.94023 14.7799 9.91023 14.7799C7.17023 14.4699 4.50023 13.4699 2.19023 11.8899C1.85023 11.6599 1.76023 11.1899 1.99023 10.8499C2.22023 10.5099 2.69023 10.4199 3.03023 10.6499C5.14023 12.0899 7.57023 12.9999 10.0702 13.2899C10.4802 13.3399 10.7802 13.7099 10.7302 14.1199C10.7002 14.4999 10.3802 14.7799 10.0002 14.7799Z"
                                    fill="#1FB9B3" />
                            </svg>



                            {{ $t('learn_degree') }} :

                        </label>
                        <div class="col-md-9 row">
                            <div class="w-100 ">
                                <ValidationProvider tag="div" :name="$t('learn_degree')" vid="user_data.degree"
                                    rules="required" v-slot="{ errors }">
                                    <div class=" mb-3 ">
                                        <select v-model="itemForm.degree" class="form-select">
                                            <option value="" class="t-c " disabled selected> درجتك العلمية</option>
                                            <option v-for="(d, i) in degrees" :key="i" :value="d.id">{{ d.name }}</option>

                                        </select>

                                    </div>
                                    <d-error-input :errors="errors" v-if="errors.length" />
                                </ValidationProvider>
                            </div>


                        </div>

                    </div>
                    <div class="row align-items-start ">
                        <label class="col-md-3 m-c fs-5 fw-bolder">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M12.1499 19.35C11.7399 19.35 11.3999 19.01 11.3999 18.6V16.5C11.3999 16.09 11.7399 15.75 12.1499 15.75C12.5599 15.75 12.8999 16.09 12.8999 16.5V18.6C12.8999 19.01 12.5599 19.35 12.1499 19.35Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M17.8999 22.75H6.3999V21C6.3999 19.48 7.6299 18.25 9.1499 18.25H15.1499C16.6699 18.25 17.8999 19.48 17.8999 21V22.75ZM7.8999 21.25H16.3999V21C16.3999 20.31 15.8399 19.75 15.1499 19.75H9.1499C8.4599 19.75 7.8999 20.31 7.8999 21V21.25Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M18.1499 22.75H6.1499C5.7399 22.75 5.3999 22.41 5.3999 22C5.3999 21.59 5.7399 21.25 6.1499 21.25H18.1499C18.5599 21.25 18.8999 21.59 18.8999 22C18.8999 22.41 18.5599 22.75 18.1499 22.75Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M18.4302 12.4401C18.2202 12.4401 18.0102 12.3501 17.8602 12.1801C17.6702 11.9601 17.6202 11.6501 17.7402 11.3901C18.0802 10.6101 18.2502 9.78006 18.2502 8.91006V5.91006C18.2502 5.56006 18.1902 5.22006 18.0702 4.86006C18.0602 4.83006 18.0502 4.79006 18.0402 4.75006C18.0102 4.60006 18.0002 4.45006 18.0002 4.31006C18.0002 3.90006 18.3402 3.56006 18.7502 3.56006H19.3502C21.1402 3.56006 22.6002 5.06006 22.6002 6.91006C22.6002 8.44006 21.9702 9.95006 20.8802 11.0401C20.8602 11.0601 20.8002 11.1101 20.7902 11.1201C20.2002 11.6101 19.5302 12.1601 18.6302 12.4101C18.5602 12.4301 18.5002 12.4401 18.4302 12.4401ZM19.6802 5.09006C19.7302 5.36006 19.7502 5.64006 19.7502 5.91006V8.91006C19.7502 9.32006 19.7202 9.71006 19.6602 10.1101C19.7202 10.0601 19.7702 10.0201 19.8302 9.97006C20.6302 9.17006 21.1002 8.05006 21.1002 6.91006C21.1002 6.01006 20.4902 5.25006 19.6802 5.09006Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M5.5799 12.4001C5.4999 12.4001 5.4299 12.3901 5.3499 12.3601C4.5299 12.1001 3.7599 11.6201 3.1199 10.9801C1.9699 9.7101 1.3999 8.3201 1.3999 6.8501C1.3999 5.0301 2.8299 3.6001 4.6499 3.6001H5.2999C5.5499 3.6001 5.7899 3.7301 5.9299 3.9401C6.0699 4.1501 6.0899 4.4201 5.9899 4.6501C5.8299 5.0101 5.7499 5.4201 5.7499 5.8501V8.8501C5.7499 9.7101 5.9199 10.5501 6.2699 11.3501C6.3899 11.6201 6.3299 11.9301 6.1399 12.1501C5.9899 12.3101 5.7899 12.4001 5.5799 12.4001ZM4.2999 5.1301C3.4899 5.2901 2.8999 5.9901 2.8999 6.8501C2.8999 7.9401 3.3399 8.9901 4.2099 9.9501C4.2499 10.0001 4.2999 10.0401 4.3499 10.0801C4.2799 9.6701 4.2499 9.2601 4.2499 8.8501V5.8501C4.2499 5.6101 4.2699 5.3701 4.2999 5.1301Z"
                                    fill="#1FB9B3" />
                                <path
                                    d="M12 16.75C7.73 16.75 4.25 13.27 4.25 9V6C4.25 3.38 6.38 1.25 9 1.25H15C17.62 1.25 19.75 3.38 19.75 6V9C19.75 13.27 16.27 16.75 12 16.75ZM9 2.75C7.21 2.75 5.75 4.21 5.75 6V9C5.75 12.45 8.55 15.25 12 15.25C15.45 15.25 18.25 12.45 18.25 9V6C18.25 4.21 16.79 2.75 15 2.75H9Z"
                                    fill="#1FB9B3" />
                            </svg>
                            {{ $t('graduation_year') }} :
                        </label>
                        <div class="col-md-9 row mb-3 ">

                            <ValidationProvider tag="div" :name="$t('graduation_year')" vid="user_data.graduation_year"
                                rules="required" v-slot="{ errors }">
                                <input type="text" v-model="itemForm.graduation_year" class="form-control"
                                    placeholder="حدد سنة التخرج">
                                <d-error-input :errors="errors" v-if="errors.length" />
                            </ValidationProvider>

                        </div>


                    </div>
                </div>
            </ValidationObserver>
            <div class="m-auto text-center p-3">
                <button @click="save" class="btn-main">
                    {{ $t('save') }}
                </button>
            </div>
        </div>
    </div>
</template>

<script>
import userAPI from '@/services/api/user.js'
export default {
    name: 'eduction-item',
    props: ['currentUser'],
    data: (vm) => {
        return {
            degrees: [
                { id: 'high-school', name: 'ثانوي' },
                { id: 'diploma', name: 'دبلوم' },
                { id: "bachelor", name: 'بكالوريوس' },
                { id: "master", name: 'ماجستير' },
                { id: 'phd', name: 'دكتوراة ' },
            ],
            itemForm: {
                college: '',
                degree: '',
                graduation_year: '',
                specialization: '',
                ...vm.currentUser.study_informations
            }
        }
    },
    methods: {
        async save(evt) {
            if (evt) evt.preventDefault();
            let valid = await this.$refs.form.validate();
            if (!valid) {
                console.log('form invalid')
                return;
            }
            let formData = new FormData();
            Object.keys(this.itemForm).forEach(key => {
                formData.append(`${key}`, this.itemForm[key])
            })

            try {
                let { data } = await userAPI.postStudyInformation(formData)
                if (data.success) {
                    window.SwalSuccess(data.message)
                } else {
                    window.SwalError(data.message)
                }
            } catch (error) {
                console.log('error', error)
                if (error.response) {
                    if (error.response.status == 422) {
                        this.$refs.form.setErrors(error.response.data.errors)
                    }
                }

            }
        }
    }
}
</script>

<style></style>